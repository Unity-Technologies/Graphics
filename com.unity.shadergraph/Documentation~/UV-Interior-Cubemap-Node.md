# UV Interior Cubemap Node

The UV Interior Cubemap node creates a direction vector that can be used to sample a cube map texture that represents the walls, floor, and ceilings of rooms.  This technique can be used to create buildings that appear to have fully modeled interiors seen through the windows, but, in fact, are just made from very simple meshes.

![](images/)

## Create Node menu category

The UV Interior Cubemap Node is under the **UV** category in the Create Node menu.

## Compatibility 

<ul>
    [!include[nodes-compatibility-all](./snippets/nodes-compatibility-all.md)]    <!-- ALL PIPELINES INCLUDE  -->
</ul> 


## Inputs 

[!include[nodes-inputs](./snippets/nodes-inputs.md)] <!-- MULTIPLE INPUT PORTS INCLUDE -->
| **Name** | **Type** | **Description** |
| :------  | :------- | :-------------  |
|  **Room Dimensions**  | Vector 3 | determines the number of rooms to create on the X, Y, and Z axes. When using Object space, even numbers work best for Room Dimensions. |
|  **Random**  | Boolean | when true, the sides of the projected rooms are randomly shuffled so that every room looks different |


## Controls 

[!include[nodes-single-control](./snippets/nodes-single-control.md)]

| **Name** | **Type** | **Options**  | **Description** |
| :------  | :------- | :----------- | :-------------  |
|  **Space**  | Drop-Down | Object, UV | selects the method you want to use for applying the effect. Object space creates the effect relative to the mesh you apply it to.  UV space creates the effect relative to the UVs of the mesh. |


## Outputs

[!include[nodes-single-output](./snippets/nodes-single-output.md)] <!-- SINGLE OUTPUT PORT INCLUDE -->

| **Name** | **Type** | **Description** |
| :------  | :------- | :-------------  |
|  **Dir**   | Vector 3 | a vector used to sample a cube map intended to represent the walls, floor, and ceiling of a room |

## Example graph usage 

In the following example, we use a UV Interior Cube node to create a direction vector.  We then use that vector to sample a cube map.  The direction vector generated by the UV Interior Cube node creates the illusion that the simple cube geometry has interior compartments.

![](images/)

## Generated code example

[!include[nodes-generated-code](./snippets/nodes-generated-code.md)]

```
float3 UVW = ObjectSpacePosition * RoomDimensions * 0.99;
float3 pos = frac(UVW) * 2 - 1;
float3 viewDir = transformWorldToObjectDirection(CameraDirection) * RoomDimensions;
float3 id = 1/viewDir;
float3 k = abs(id) - (pos * id);
float kMin = min(min(k.x, k.y), k.z);
float3 Dir = pos + (kMin * viewDir);
```
This node is a subgraph, so you can double-click the node itself to open it and see how it works.

## Related nodes 
[!include[nodes-related](./snippets/nodes-related.md)]
[Sample Cubemap](Sample-Cubemap-Node.md)

Creating an Interior Cube map:
These instructions describe the process of creating a cube map for use with the UV Interior Cube node.
In your favorite image editing software, create an image that is 6 times wider than it is tall and where the height is a power of 2.  For example, it could be 768 wide x 128 high. The image will contain 6 square images that will represent the walls, floor, and ceiling of the interiors.
For each of the squares, fill in images that represent the walls, floor, and ceiling of the building interiors you want to represent. Square #4 represents the floor.  Square #3 represents the ceiling.  Squares 1, 2, 5, and 6 represent the walls of the rooms. Save the image in Unity-compatible image format such as PNG or TGA.
Import the image into Unity. Set the Texture Shape to be “Cube” and set the Mapping to “6 Frames Layout (Cubic Environment)”
In Shader Graph, use the Sample Cubemap node to sample your cubemap.  Use the UV Interior Cube node to create the Dir input that the Sample Cubemap node requires.  You now have simulated interiors that you can integrate in with the rest of your building shader.
