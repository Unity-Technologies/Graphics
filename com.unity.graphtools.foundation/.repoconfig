# ** Note that all patterns below are case-insensitive

[version]
repoconfig=3
minimum-unity-meta=11

[processors]
# best guess at c++/cli from path
uncrustify.cppcli= (\bwinrt|\/metroplayer\/).*\.(cpp|h)$

[format]

# try to detect generated files that should not be reformatted
autogen-ignore=<<EOT
 ^//\ <auto-generated>
|^//\ Autogenerated\b
|^//\ Generated\ by\b
|^//\ Generated\ with\b
|^/\*\ SCE\ CONFIDENTIAL\b
|^/\*\ this\ ALWAYS\ GENERATED\ file\b
|^//\ This\ file\ is\ autogenerated\b
|^\s*/\*\ File\ created\ by\ MIDL\ compiler\ version\b
|^//\*\ This\ is\ an\ include\ file\ generated\ by\ Message\ Compiler\b
|^//\ This\ code\ was\ automatically\ generated\b
|\bDO\ NOT\ ALTER\ THIS\ FILE$
EOT

bindings-detect=<<EOT
 \b(CSRAW|C\+\+RAW)\b
EOT

path-ignore=<<EOT
# specially named folders that will be matched anywhere in a path (e.g. all files under any 'External' will be ignored)
(^|/)(
     External
    |Generated\ Files
    |Tests/[^/]*Fixtures
)(/|$)
|
# rooted folder paths
^(
 Editor/Src/AssetPipeline/ShaderImporting/ShaderUpgraderTests           # mainly for the "empty" files
|External/Perl/lib
|PlatformDependent/.*/npapi(_shared)?
|PlatformDependent/PSP2Player/Tools/sce
|Runtime/Math/Simd                                                      # too hard to parse due to macros that confuse uncrustify. either hack at uncrustify with config file, or fix simd library to look normal (prefer the latter).
|Tools/Build/tests                                                      # confuses format.pl because it contains Mercurial test files which use the same extension .t as perl test files
|Tools/DocTools/TestXml                                                 # these files should not be formatted because they are tested against other unformatted .xml files
|Tools/DocTools/UnderlyingModel\.TestAssemblySource/TestDocs            # the formatting is not helpful in this case because we'd be formatting input test data that is used for parsing
|External/il2cpp                                                           # Files in this folder are already copied from another repository so we can't format it. It will soon be moved to External folder.
|Tools/iPhone/UnityRemote/Classes/BonjourSupport
|Tools/NSIS
|Tools/WiX
|Assets/Editor/Packages/GraphView
)/|
# rooted file paths
^(
 Editor/Src/tetgen\.(cpp|h)
|Editor/ScriptUpdater/IntegrationTests/Resources/.*\.txt                # FileWith_UTF8_Chars.txt FileWith_Windows-1252_Chars.txt
|PlatformDependent/OSX/backtrace\.c
|PlatformDependent/OSX/stack_logging\.[ch]
|PlatformDependent/Win/StackWalker\.cpp
|Runtime/Geometry/TriTriIntersect\.cpp
|Tests/Unity\.IntegrationTests/AssetImporting/TextImport/Assets/.*\.txt # UTF16.txt KnowledgeAdventureRaw.txt
|Tools/UnityBindingsParser/BindingsToCsAndCpp/Tests/typetests\.bindings # We cannot format this as a regular bindings file because it's not. It contains test-specific bindings sections using a special syntax.
)$
EOT

# This will override repo-ignore, and select back in something that was excluded. This is necessary to avoid overly complicating the regex.
path-ignore-override=<<EOT
^(
 External/Perl/lib/Unity                                                # we want to have everything go in Perl/lib (excluded above), which would include Unity modules, which we want formatted, so include it back in here
|External/AssetStore                                                    # all this 'external' stuff that is actually unity-controlled needs to be moved out
|External/CacheServer                                                   # (keep in sync with .editorconfig!)
|External/Jamplus
|External/JobProcess
)/
EOT

# Matches for strings like 'Copyright (c) 2000 Joeschmo technologies'. All of these should be moved to external.
copyright-ignore=<<EOT
\bcopyright\s*(
    \([c|©|_]\)|
    \d{4})|
\([c|©|_]\)\s*copyright\b|
\b(this|the)\ software\ is\ provided\ ['"]as-is['"]
EOT

# If a copyright match also matches this, then we include it anyway. For when we put copyright info in a file, but it's actually a Unity copyright.
copyright-ignore-override=<<EOT
\b(unity|mecanim)\b
EOT

[verify]

branch=(?-i)^([a-z0-9][a-zA-Z0-9_.-]*(/[a-zA-Z0-9_.-]+)+|trunk)$        # same as server side rule

required-hg-extensions=eol largefiles

path=<<EOT
# general rule
^[a-z0-9./_+-]+$
# exceptions
|^Editor/Resources/Common/ScriptTemplates/[a-z0-9./_# -]+$
|^Editor/Resources/Common/WebPlayerTemplates/[a-z0-9./_# -]+$
|^PlatformDependent/iPhonePlayer/Trampoline/Unity-iPhone\ Tests/
|^Runtime/Resources/Assets/DefaultResourcesExtra/Particle[ ]
|^Tests/EditorTests/EditorHandles/Assets/Screen\ Shot\ Utilities/
|^Tests/EditorTests/UI/Assets/Editor/Input\ Field/
|^Tests/Unity\.\w+\.Framework/Service\ References/
|^Tests/Unity\.IntegrationTests/Misc/Resources/PragmaUpgrade/Assets/NewBehaviourScript\ 1\.js$
|^Tests/Unity\.IntegrationTests/Misc/Resources/PragmaUpgrade/Assets/NewBehaviourScript\ 2\.js$
|^Tests/Unity\.IntegrationTests/SceneLoading/case757542/Assets/Add\ light\ to\ Troffer\.js$
|^Tools/UnityYAMLMerge/TestData/Prefabs/case_ScriptAndVariables/merge\ logic\ question\.txt$
|/UnitTest\+\+
EOT
