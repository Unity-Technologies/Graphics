# Ambient Occlusion

The Ambient Occlusion post-processing effect darkens creases, holes, intersections and surfaces that are close to each other. In the real world, such areas tend to block out or occlude ambient light, so they appear darker.

URP implements the real-time Screen Space Ambient Occlusion (SSAO) post-processing effect as a Renderer Feature.

> **NOTE**: The SSAO effect is a Renderer Feature and works independently from the post-processing effects in URP. This effect does not depend on or interact with Volumes.

The following images show a scene with the Ambient Occlusion effect turned off, on, and only the Ambient Occlusion texture.

![Scene with Ambient Occlusion effect turned off.](Images/post-proc/ssao/scene-ssao-off.png)

![Scene with Ambient Occlusion effect turned on.](Images/post-proc/ssao/scene-ssao-on.png)

![Scene with only the Ambient Occlusion texture.](Images/post-proc/ssao/scene-ssao-only-ao.png)

## Adding the SSAO effect to a Renderer

URP implements the Ambient Occlusion post-processing effect as a Renderer Feature.

To use the Ambient Occlusion post-processing effect in your project:

1. In the __Project__ window, select the Renderer that the URP asset is using.

    ![Select the Renderer.](Images/post-proc/ssao/ssao-select-renderer.png)

    The Inspector window shows the the Renderer properties.

    ![Inspector window shows the Renderer properties.](Images\post-proc\ssao\ssao-inspector-no-rend-features.png)

2. In the Inspector window, select __Add Renderer Feature__. In the list, select __Screen Space Ambient Occlusion__.

    ![Select __Add Renderer Feature__, then select __Screen Space Ambient Occlusion__](Images/post-proc/ssao/ssao-select-renderer-feature.png)

    Unity adds the SSAO Renderer Feature to the Renderer.

    ![SSAO Renderer Feature.](Images/post-proc/ssao/ssao-renderer-feature-created.png)

Now Cameras that use the Renderer with the SSAO Renderer Feature have the Ambient Occlusion effect.

## Properties

This section describes the properties of the SSAO Renderer Feature.

| **Property**   | **Description**                                              |
| -------------- | ------------------------------------------------------------ |
| **Name**       | The name of the Renderer Feature                             |
| **Downsample**  | Selecting this check box reduces the resolution of the pass that calculates the Ambient Occlusion effect by a factor of 2.<br/>This reduces the load on the GPU significantly, but makes the effect less detailed. |
| **Source**     | Select the source of the normal vector values. The SSAO Renderer Feature uses normal vectors for calculating how exposed each point on a surface is to ambient lighting.<br />Available options:<ul><li><strong>Depth Normals</strong>: SSAO uses the normal texture generated by the DepthNormals Pass.</li><li><strong>Depth</strong>: SSAO does not use the DepthNormals Pass to generate the normal texture. SSAO reconstructs the normal vectors using the depth texture instead. Selecting this option enables the **Normal Quality** property.</li></ul>For more information on the Source property, see the section [Implementation details](#implementation-details). |
| **Normal Quality** | This property becomes active when you select the option Depth in the **Source** property.<br/>Higher quality of the normal vectors produces smoother SSAO effect.<br/>Available options:<ul><li><strong>Low</strong></li><li><strong>Medium</strong></li><li><strong>High</strong></li></ul>For more information, see the section [Implementation details](#implementation-details). |
| **Intensity** | This property defines the intensity of the darkening effect. (TODO: screenshots) |
| **Direct Lighting Strength** | This property defines how visible the effect is in areas exposed to direct lighting. (TODO: screenshots) |
| **Radius** | When calculating the the Ambient Occlusion value, the SSAO effect takes samples of the normal texture within this radius from the current pixel. |
| **Sample Count** | For each pixel, the SSAO Render Feature takes this number of samples within the specified radius to calculate the Ambient Occlusion value. |

<a name="#implementation-details"></a>

## Implementation details

The SSAO Renderer Feature uses normal vectors for calculating how exposed each point on a surface is to ambient lighting.

URP 10.0 implements the `DepthNormals` Pass block that generates the the normal texture `_CameraNormalsTexture` for the current frame. By default, the SSAO Renderer Feature uses this texture to calculate Ambient Occlusion values.

If you implement your custom SRP and if you do not want to implement the `DepthNormals` Pass block in your shaders, you can use the SSAO Renderer Feature and set its **Source** property to **Depth**. In this case, Unity does not use the DepthNormals Pass to generate the normal, it generates the normal texture using the depth texture instead.

Selecting the option **Depth** in the **Source** property enables the **Normal Quality** property. The options in this property (Low, Medium, and High) determine the number of samples of the depth texture that Unity takes when reconstructing the normal vector from the depth texture. The number of samples per quality level: Low: 1, Medium: 5, High: 9.

### Visual Quality: Depth Normals compared to Depth

The **Depth Normals** option in the **Source** property lets Unity make use of a more accurate normal texture. Use **Depth** option only if you want to avoid using the `DepthNormals` Pass block in your custom shaders.

In a lot of scenarios, the **Depth** option produces results comparable with the **Depth Normals** option. But in certain cases, the **Depth Normals** option provides a significant increase in quality. The following images show an example of such case. 

(TODO: screenshots)

## Performance



