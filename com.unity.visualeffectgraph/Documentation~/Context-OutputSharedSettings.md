# Shared Output Settings and Properties

All outputs share these settings and property ports.

## Render State Settings

| **Setting**                 | **Type** | **Description**                                              |
| --------------------------- | -------- | ------------------------------------------------------------ |
| **Blend Mode**              | Enum     | Specifies the blending method for the system and determines how to use the alpha. The options are :<br/>&#8226; **Opaque**: Does not use the alpha value and renders the output in the opaque pass. This also writes to the depth buffer.<br/>&#8226; **Alpha**: Uses the [standard alpha blend](https://docs.unity3d.com/Manual/SL-Blend.html) mode and renders the output in the transparent pass. By default, this enables GPU sorting for particle outputs (which you can override using the **Sort** setting).<br/>&#8226; **Premultiplied Alpha**: Uses the [premultiplied alpha blend mode](https://docs.unity3d.com/Manual/SL-Blend.html) and renders the output in the transparent pass. By default, this enables GPU sorting for particle outputs (which you can override using the **Sort** setting).<br/>&#8226; **Additive**: Uses the [additive blend mode](https://docs.unity3d.com/Manual/SL-Blend.html) for alpha and renders the output in the transparent pass. |
| **Use Alpha Clipping**      | Bool     | Indicates whether the system uses alpha clipping and discards pixels under a certain alpha threshold. If you enable this property, use the **Alpha Threshold** input to set the alpha value below which the system discards pixels. |
| **Generate Motion Vectors** | Bool     | **(Inspector)** Indicates whether particles in the system write motion vectors and the system should thus generate a motion vector pass. This is useful when you want temporal effects, like temporal anti-aliasing or motion blur, to take the output into account. Not all outputs can generate motion vectors and in that case, this setting is not visible.<br/>If you enable this setting with a transparent output, an **Alpha Threshold** input port appears. Use this port to specify the minimum alpha the system requires a pixel to have to write motion vectors for it. This is because motion vectors cannot be blended. |
| **Cast Shadows**            | Bool     | **(Inspector)** Indicates whether particles in the system cast shadows and the system should thus generate a shadow pass.<br/>If you enable this settings with a transparent output, an **Alpha Threshold** port appears. Use this port to specify the minimum alpha the system requires a pixel to have to write it to the shadow pass. This is because shadows cannot be transparent. |
| **Cull Mode**               | Enum     | **(Inspector)** Specifies the cull mode to use with the system. The options are:<br/>&#8226; **Default**: Use the default cull mode for the system.<br/>&#8226; **Front**: Culls front faces of particles in the system.<br/>&#8226; **Back**: Culls back faces of particles in the system.<br/>&#8226; **Off**: Culls no faces. This mode makes the output render both front and back faces. |
| **Z Write Mode**            | Enum     | **(Inspector)** Specifies the depth writing mode to use with the system. The options are:<br/>&#8226; **Default**: Uses the default depth write mode for the system. This is typically **On** for opaque and **Off** for transparent.<br/>&#8226; **On**: Enables depth writing for the system.<br/>&#8226; **Off**: Disables depth writing for the system. |
| **Z Test Mode**             | Enum     | **(Inspector)** Specifies the depth test mode to use with the system. The options are:<br/>&#8226; **Default**: Use the default depth testing mode for the system. This is typically **On**.<br/>&#8226; **On**: Enables depth testing for the system.<br/>&#8226; **Off**: Disables depth testing for the system. This means the output renders regardless of whether the pixels are occluded by closer geometry. |

## Particle Options Settings

| **Setting**           | **Type** | **Description**                                              |
| --------------------- | -------- | ------------------------------------------------------------ |
| **Color Mapping**     | Enum     | Specifies how to use the main texture to color particle pixels. The options are:<br/>&#8226; **Default**: Uses the main Texture color directly (and multiplies it with particle color.<br/>&#8226; **GradientMapped**: Uses the Texture alpha to fetch color from the created **Gradient** port (and then multiplies it with particle color.<br/>This property only appears on output Contexts that support texturing. |
| **UV Mode**           | Enum     | Specifies how to use UVs for texturing. The options are:<br/>&#8226; **Default**: Uses UVs as-is to sample textures.<br/>&#8226; **Flipbook**: Uses sub-UVs to sample in a flipbook texture. To specify the dimensions of the flipbook texture (frame count per axis) use the **Flip Book Size** property. To determine the current frame of the flipbook, this Context uses the **tex index** attribute of the particle. In this mode, the Context does not interpolate between flipbook frames.<br/>&#8226; **FlipbookBlend**: Same as **Flipbook** but uses linear interpolation to blend between frames. This mode uses the fractional part of the **tex index** attribute to calculate the interpolation amount.<br/>&#8226; **ScaleAndBias**: Scales and biases the UV before the Context samples the texture.<br/>&#8226; **FlipbookMotionBlend**: Same as **FlipbookBlend** but uses an additional motion vector texture. To specify the motion vector texture, use the **Motion Vector Map** input port. To scale the motion vectors, use the **Motion Vector Scale** input port.<br/>This property only appears on output Contexts that support texturing. |
| **Use Soft Particle** | Bool     | Indicates whether to use soft particles. Soft particles remove hard intersections between particles and geometry. To specify a maximum distance to geometry at which to fade particles out, use the **Soft Particle Fade Distance**.<br/>This property only appears if **Blend Mode** is not set to **Opaque**. |
| **Sort**              | Enum     | **(Inspector)** Specifies the sort mode to use with the system. If the VFX Graph sorts particles for the system, it uses an additional compute pass and bases the sorting on each particle's distance from the camera. The options are: <br/>&#8226; **Default**: The VFX Graph determines whether to sort the system's particles. Sorting is **On** for non-commutative blend modes, so **Alpha** and **Premulitplied Alpha**.<br/>&#8226;**On**: Enables particle sorting.<br/>&#8226; **Off**: Disables particle sorting. In this mode, if you enable **Indirect Draw** and use a non-commutative blend mode (**Alpha** or **Premultiplied Alpha**), the particle order per frame is not deterministic which causes flickering.<br/>Note that sorting can be an expensive operation and does not scale well with the number of particles to sort.<br/>If you enable particle sorting, it enables **Indirect Draw**. |
| **Indirect Draw**     | Bool     | **(Inspector)** Indicates whether the system only outputs alive particles as opposed to outputting all particles and culling dead ones in the vertex shader. Enable this setting to improve performance when the number of particles is not at the system capacity or there is a high number of vertices per particle (typically with mesh outputs).<br/>Other settings can implicitly enable **Indirect Draw**. In this case, this setting is enabled, but not visible. The settings that can implicitly enable **Indirect Draw** are **Sort**, **Compute Culling**, and **Frustum Culling**. |
| **Compute Culling**   | Bool     | **(Inspector)** Indicates whether the system should cull particles that are not alive in a compute pass rather than in the vertex shader. Enable this to improve performance if you set the **alive** attribute in the output and have a high number of vertices per particle.<br/>If you enable **Frustum Culling**, it implicitly enables **Indirect Draw** too. In this case, this setting is enabled, but not visible. |
| **Frustum Culling**   | Bool     | **(Inspector)** Indicates whether to cull particles that are outside of the camera frustum in a compute pass. Enable this to improve the performance of large systems where a significant amount of particles can be out of the camera frustum.<br/>Note that frustum culling can cause issues with shadow casting as the system does not take culled particles outside of the camera frustum into account during shadow passes. |

## Context Properties

| **Input**                       | **Type**  | **Description**                                              |
| ------------------------------- | --------- | ------------------------------------------------------------ |
| **Alpha Threshold**             | float     | Specifies the alpha threshold to use for pixel clipping. The system only renders pixels with an alpha value above this threshold.<br/>This port only appears if at least one of the following condition is met:<br/>&#8226; **Use Alpha Clipping** is enabled: Alpha clipping is active for all render passes including main color pass.<br/>&#8226; **Generate Motion Vectors** is enabled and the **Blend Mode** is not **Opaque**: Alpha clipping is active during the motion vector pass.<br/>&#8226; **Cast Shadows** is enabled and the **Blend Mode** is not **Opaque**: Alpha clipping is active during the shadow pass. |
| **Gradient**                    | Gradient  | The gradient to use to sample color from texture alpha.<br/>This property only appears if you set **Color Mapping** to **GradientMapped**. |
| **Flip Book Size**              | float2    | The number of frames in the flipbook along x and y dimensions.<br/>This property only appears if you set **UV Mode** to one that specifies a flipbook. |
| **Motion Vector Map**           | Texture2D | The texture to use to sample 2D motion vectors for a given pixel.<br/>This property only appears if you set **UV Mode** to **FlipbookMotionBlend**. |
| **Motion Vector Scale**         | float     | The scale to apply to sampled motion vectors.<br/>This property only appears if you set **UV Mode** to **FlipbookMotionBlend**. |
| **UV Scale**                    | float2    | The scale to apply to the UVs before sampling textures.<br/>This property only appears if you set **UV Mode** to **ScaleAndBias**. |
| **UV Bias**                     | float2    | The bias to apply to UVs before sampling textures.<br/>This property only appears if you set **UV Mode** to **ScaleAndBias**. |
| **Soft Particle Fade Distance** | float     | The maximum distance in world space where a particle begins to fade.<br/>This property only appears if you enable **Use Soft Particle**. |